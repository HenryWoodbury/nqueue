generator client {
  provider   = "prisma-client-js"
  engineType = "client"
}

datasource db {
  provider  = "postgresql"
}

model Draft {
  id           String     @id @default(cuid()) // Draft has its own ID
  description  String?    // Unique to Draft
  leagueId     String?
  parentLeague League?    @relation("LeagueToDrafts", fields: [leagueId], references: [id])
  status       String     @default("draft") // e.g., "draft", "published", "active", etc.
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@map("drafts")
}

model League {
  id            String   @id @default(cuid())
  name          String
  clerkOrgId    String   @unique 
  commissioner  String   // Clerk User ID (for initial creator tracking)
  description   String?
  drafts        Draft[]  @relation("LeagueToDrafts")
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  
  @@map("leagues")
  @@index([clerkOrgId])
  @@index([commissioner])
}

model PlayerUniverse {
  id          String   @id @default(cuid())
  ottoneuId   String   @unique
  name        String
  fangraphsId String?
  mlbamId     String?
  birthday    String?
  positions   String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("player_universe")
  @@index([ottoneuId])
}
